var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._,Controller=function(){function e(){return i.__widgetId?{widgetId:i.__widgetId,name:i.__controllerPath}:i.__controllerPath}var t=[],i=this;this.__iamalloy=!0,_.extend(this,Backbone.Events,{__views:{},__proxyProperties:{},setParent:function(e){var i=t.length;if(i){this.parent=e.__iamalloy?e.parent:e;for(var r=0;i>r;r++)t[r].__iamalloy?t[r].setParent(this.parent):this.parent.add(t[r])}},addTopLevelView:function(e){t.push(e)},addProxyProperty:function(e,t){this.__proxyProperties[e]=t},removeProxyProperty:function(e){delete this.__proxyProperties[e]},getTopLevelViews:function(){return t},getView:function(e){return"undefined"==typeof e||null===e?t[0]:this.__views[e]},removeView:function(e){delete this[e],delete this.__views[e]},getProxyProperty:function(e){return this.__proxyProperties[e]},getViews:function(){return this.__views},destroy:function(){},getViewEx:function(e){var t=e.recurse||!1;if(t){var i=this.getView();return i?i.__iamalloy?i.getViewEx({recurse:!0}):i:null}return this.getView()},getProxyPropertyEx:function(e,t){var i=t.recurse||!1;if(i){var r=this.getProxyProperty(e);return r?r.__iamalloy?r.getProxyProperty(e,{recurse:!0}):r:null}return this.getView(e)},createStyle:function(t){return Alloy.createStyle(e(),t)},UI:{create:function(t,i){return Alloy.UI.create(e(),t,i)}},addClass:function(t,i,r){return Alloy.addClass(e(),t,i,r)},removeClass:function(t,i,r){return Alloy.removeClass(e(),t,i,r)},resetClass:function(t,i,r){return Alloy.resetClass(e(),t,i,r)},updateViews:function(e){var t=this.getViews();return _.isObject(e)&&_.each(_.keys(e),function(i){var r=t[i.substring(1)];0===i.indexOf("#")&&"#"!==i&&_.isObject(r)&&"function"==typeof r.applyProperties&&r.applyProperties(e[i])}),this}})};module.exports=Controller;